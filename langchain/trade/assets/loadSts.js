var is=Object.defineProperty;var os=(e,o,t)=>o in e?is(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var U=(e,o,t)=>os(e,typeof o!="symbol"?o+"":o,t);import{c as as,r as ls,n as Ct,g as cs,E as ds,b as us,d as fs,e as hs,p as ps,N as gs,A as ms,f as ys,h as Es,S as bs,D as Ps,i as Ns,j as As,k as Ts,l as xs,m as Is,o as ws,q as Ss,t as Cs,u as vs,v as Rs,w as _s,C as Os,x as ks,y as $s,z as Fs,B as Vs,F as Ls,G as qs,H as Us,I as Hs,J as Bs,K as Ms,L as Ws,M as zs,O as js,P as Xs,Q as Gs,R as vt,T as Ks,U as Z,a as Rt,V as _t}from"./index2.js";import{t as Js,f as Zs,s as Ys,F as Qs,q as Ot,e as q,a as Ds,v as en,g as kt}from"./widget.js";function rt(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(o){return"%"+o.charCodeAt(0).toString(16).toUpperCase()})}const tn=(e,o)=>{for(const t of Object.keys(e)){const u=e[t],y=async function(i,r,l){const n=new u(i);if(typeof r=="function")this.send(n,r);else if(typeof l=="function"){if(typeof r!="object")throw new Error(`Expected http options but got ${typeof r}`);this.send(n,r||{},l)}else return this.send(n,r)},T=(t[0].toLowerCase()+t.slice(1)).replace(/Command$/,"");o.prototype[T]=y}},$t=e=>{const o="#text";for(const t in e)e.hasOwnProperty(t)&&e[t][o]!==void 0?e[t]=e[t][o]:typeof e[t]=="object"&&e[t]!==null&&(e[t]=$t(e[t]));return e};var de={},ue={},it;function je(){return it||(it=1,function(e){const o=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",t=o+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",u="["+o+"]["+t+"]*",y=new RegExp("^"+u+"$"),T=function(r,l){const n=[];let s=l.exec(r);for(;s;){const E=[];E.startIndex=l.lastIndex-s[0].length;const h=s.length;for(let w=0;w<h;w++)E.push(s[w]);n.push(E),s=l.exec(r)}return n},i=function(r){const l=y.exec(r);return!(l===null||typeof l>"u")};e.isExist=function(r){return typeof r<"u"},e.isEmptyObject=function(r){return Object.keys(r).length===0},e.merge=function(r,l,n){if(l){const s=Object.keys(l),E=s.length;for(let h=0;h<E;h++)n==="strict"?r[s[h]]=[l[s[h]]]:r[s[h]]=l[s[h]]}},e.getValue=function(r){return e.isExist(r)?r:""},e.isName=i,e.getAllMatches=T,e.nameRegexp=u}(ue)),ue}var ot;function Ft(){if(ot)return de;ot=1;const e=je(),o={allowBooleanAttributes:!1,unpairedTags:[]};de.validate=function(c,f){f=Object.assign({},o,f);const N=[];let d=!1,m=!1;c[0]==="\uFEFF"&&(c=c.substr(1));for(let a=0;a<c.length;a++)if(c[a]==="<"&&c[a+1]==="?"){if(a+=2,a=u(c,a),a.err)return a}else if(c[a]==="<"){let P=a;if(a++,c[a]==="!"){a=y(c,a);continue}else{let b=!1;c[a]==="/"&&(b=!0,a++);let p="";for(;a<c.length&&c[a]!==">"&&c[a]!==" "&&c[a]!=="	"&&c[a]!==`
`&&c[a]!=="\r";a++)p+=c[a];if(p=p.trim(),p[p.length-1]==="/"&&(p=p.substring(0,p.length-1),a--),!I(p)){let g;return p.trim().length===0?g="Invalid space after '<'.":g="Tag '"+p+"' is an invalid name.",h("InvalidTag",g,x(c,a))}const O=r(c,a);if(O===!1)return h("InvalidAttr","Attributes for '"+p+"' have open quote.",x(c,a));let A=O.value;if(a=O.index,A[A.length-1]==="/"){const g=a-A.length;A=A.substring(0,A.length-1);const _=n(A,f);if(_===!0)d=!0;else return h(_.err.code,_.err.msg,x(c,g+_.err.line))}else if(b)if(O.tagClosed){if(A.trim().length>0)return h("InvalidTag","Closing tag '"+p+"' can't have attributes or invalid starting.",x(c,P));if(N.length===0)return h("InvalidTag","Closing tag '"+p+"' has not been opened.",x(c,P));{const g=N.pop();if(p!==g.tagName){let _=x(c,g.tagStartPos);return h("InvalidTag","Expected closing tag '"+g.tagName+"' (opened in line "+_.line+", col "+_.col+") instead of closing tag '"+p+"'.",x(c,P))}N.length==0&&(m=!0)}}else return h("InvalidTag","Closing tag '"+p+"' doesn't have proper closing.",x(c,a));else{const g=n(A,f);if(g!==!0)return h(g.err.code,g.err.msg,x(c,a-A.length+g.err.line));if(m===!0)return h("InvalidXml","Multiple possible root nodes found.",x(c,a));f.unpairedTags.indexOf(p)!==-1||N.push({tagName:p,tagStartPos:P}),d=!0}for(a++;a<c.length;a++)if(c[a]==="<")if(c[a+1]==="!"){a++,a=y(c,a);continue}else if(c[a+1]==="?"){if(a=u(c,++a),a.err)return a}else break;else if(c[a]==="&"){const g=E(c,a);if(g==-1)return h("InvalidChar","char '&' is not expected.",x(c,a));a=g}else if(m===!0&&!t(c[a]))return h("InvalidXml","Extra text at the end",x(c,a));c[a]==="<"&&a--}}else{if(t(c[a]))continue;return h("InvalidChar","char '"+c[a]+"' is not expected.",x(c,a))}if(d){if(N.length==1)return h("InvalidTag","Unclosed tag '"+N[0].tagName+"'.",x(c,N[0].tagStartPos));if(N.length>0)return h("InvalidXml","Invalid '"+JSON.stringify(N.map(a=>a.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return h("InvalidXml","Start tag expected.",1);return!0};function t(c){return c===" "||c==="	"||c===`
`||c==="\r"}function u(c,f){const N=f;for(;f<c.length;f++)if(c[f]=="?"||c[f]==" "){const d=c.substr(N,f-N);if(f>5&&d==="xml")return h("InvalidXml","XML declaration allowed only at the start of the document.",x(c,f));if(c[f]=="?"&&c[f+1]==">"){f++;break}else continue}return f}function y(c,f){if(c.length>f+5&&c[f+1]==="-"&&c[f+2]==="-"){for(f+=3;f<c.length;f++)if(c[f]==="-"&&c[f+1]==="-"&&c[f+2]===">"){f+=2;break}}else if(c.length>f+8&&c[f+1]==="D"&&c[f+2]==="O"&&c[f+3]==="C"&&c[f+4]==="T"&&c[f+5]==="Y"&&c[f+6]==="P"&&c[f+7]==="E"){let N=1;for(f+=8;f<c.length;f++)if(c[f]==="<")N++;else if(c[f]===">"&&(N--,N===0))break}else if(c.length>f+9&&c[f+1]==="["&&c[f+2]==="C"&&c[f+3]==="D"&&c[f+4]==="A"&&c[f+5]==="T"&&c[f+6]==="A"&&c[f+7]==="["){for(f+=8;f<c.length;f++)if(c[f]==="]"&&c[f+1]==="]"&&c[f+2]===">"){f+=2;break}}return f}const T='"',i="'";function r(c,f){let N="",d="",m=!1;for(;f<c.length;f++){if(c[f]===T||c[f]===i)d===""?d=c[f]:d!==c[f]||(d="");else if(c[f]===">"&&d===""){m=!0;break}N+=c[f]}return d!==""?!1:{value:N,index:f,tagClosed:m}}const l=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function n(c,f){const N=e.getAllMatches(c,l),d={};for(let m=0;m<N.length;m++){if(N[m][1].length===0)return h("InvalidAttr","Attribute '"+N[m][2]+"' has no space in starting.",k(N[m]));if(N[m][3]!==void 0&&N[m][4]===void 0)return h("InvalidAttr","Attribute '"+N[m][2]+"' is without value.",k(N[m]));if(N[m][3]===void 0&&!f.allowBooleanAttributes)return h("InvalidAttr","boolean attribute '"+N[m][2]+"' is not allowed.",k(N[m]));const a=N[m][2];if(!w(a))return h("InvalidAttr","Attribute '"+a+"' is an invalid name.",k(N[m]));if(!d.hasOwnProperty(a))d[a]=1;else return h("InvalidAttr","Attribute '"+a+"' is repeated.",k(N[m]))}return!0}function s(c,f){let N=/\d/;for(c[f]==="x"&&(f++,N=/[\da-fA-F]/);f<c.length;f++){if(c[f]===";")return f;if(!c[f].match(N))break}return-1}function E(c,f){if(f++,c[f]===";")return-1;if(c[f]==="#")return f++,s(c,f);let N=0;for(;f<c.length;f++,N++)if(!(c[f].match(/\w/)&&N<20)){if(c[f]===";")break;return-1}return f}function h(c,f,N){return{err:{code:c,msg:f,line:N.line||N,col:N.col}}}function w(c){return e.isName(c)}function I(c){return e.isName(c)}function x(c,f){const N=c.substring(0,f).split(/\r?\n/);return{line:N.length,col:N[N.length-1].length+1}}function k(c){return c.startIndex+c[1].length}return de}var oe={},at;function sn(){if(at)return oe;at=1;const e={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,u){return u},attributeValueProcessor:function(t,u){return u},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,u,y){return t}},o=function(t){return Object.assign({},e,t)};return oe.buildOptions=o,oe.defaultOptions=e,oe}var fe,lt;function nn(){if(lt)return fe;lt=1;class e{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,u){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:u})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}}return fe=e,fe}var he,ct;function rn(){if(ct)return he;ct=1;const e=je();function o(n,s){const E={};if(n[s+3]==="O"&&n[s+4]==="C"&&n[s+5]==="T"&&n[s+6]==="Y"&&n[s+7]==="P"&&n[s+8]==="E"){s=s+9;let h=1,w=!1,I=!1,x="";for(;s<n.length;s++)if(n[s]==="<"&&!I){if(w&&y(n,s))s+=7,[entityName,val,s]=t(n,s+1),val.indexOf("&")===-1&&(E[l(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(w&&T(n,s))s+=8;else if(w&&i(n,s))s+=8;else if(w&&r(n,s))s+=9;else if(u)I=!0;else throw new Error("Invalid DOCTYPE");h++,x=""}else if(n[s]===">"){if(I?n[s-1]==="-"&&n[s-2]==="-"&&(I=!1,h--):h--,h===0)break}else n[s]==="["?w=!0:x+=n[s];if(h!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:E,i:s}}function t(n,s){let E="";for(;s<n.length&&n[s]!=="'"&&n[s]!=='"';s++)E+=n[s];if(E=E.trim(),E.indexOf(" ")!==-1)throw new Error("External entites are not supported");const h=n[s++];let w="";for(;s<n.length&&n[s]!==h;s++)w+=n[s];return[E,w,s]}function u(n,s){return n[s+1]==="!"&&n[s+2]==="-"&&n[s+3]==="-"}function y(n,s){return n[s+1]==="!"&&n[s+2]==="E"&&n[s+3]==="N"&&n[s+4]==="T"&&n[s+5]==="I"&&n[s+6]==="T"&&n[s+7]==="Y"}function T(n,s){return n[s+1]==="!"&&n[s+2]==="E"&&n[s+3]==="L"&&n[s+4]==="E"&&n[s+5]==="M"&&n[s+6]==="E"&&n[s+7]==="N"&&n[s+8]==="T"}function i(n,s){return n[s+1]==="!"&&n[s+2]==="A"&&n[s+3]==="T"&&n[s+4]==="T"&&n[s+5]==="L"&&n[s+6]==="I"&&n[s+7]==="S"&&n[s+8]==="T"}function r(n,s){return n[s+1]==="!"&&n[s+2]==="N"&&n[s+3]==="O"&&n[s+4]==="T"&&n[s+5]==="A"&&n[s+6]==="T"&&n[s+7]==="I"&&n[s+8]==="O"&&n[s+9]==="N"}function l(n){if(e.isName(n))return n;throw new Error(`Invalid entity name ${n}`)}return he=o,he}var pe,dt;function on(){if(dt)return pe;dt=1;const e=/^[-+]?0x[a-fA-F0-9]+$/,o=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,t={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function u(i,r={}){if(r=Object.assign({},t,r),!i||typeof i!="string")return i;let l=i.trim();if(r.skipLike!==void 0&&r.skipLike.test(l))return i;if(i==="0")return 0;if(r.hex&&e.test(l))return T(l,16);if(l.search(/[eE]/)!==-1){const n=l.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(n){if(r.leadingZeros)l=(n[1]||"")+n[3];else if(!(n[2]==="0"&&n[3][0]==="."))return i;return r.eNotation?Number(l):i}else return i}else{const n=o.exec(l);if(n){const s=n[1],E=n[2];let h=y(n[3]);if(!r.leadingZeros&&E.length>0&&s&&l[2]!==".")return i;if(!r.leadingZeros&&E.length>0&&!s&&l[1]!==".")return i;if(r.leadingZeros&&E===i)return 0;{const w=Number(l),I=""+w;return I.search(/[eE]/)!==-1?r.eNotation?w:i:l.indexOf(".")!==-1?I==="0"&&h===""||I===h||s&&I==="-"+h?w:i:E?h===I||s+h===I?w:i:l===I||l===s+I?w:i}}else return i}}function y(i){return i&&i.indexOf(".")!==-1&&(i=i.replace(/0+$/,""),i==="."?i="0":i[0]==="."?i="0"+i:i[i.length-1]==="."&&(i=i.substr(0,i.length-1))),i}function T(i,r){if(parseInt)return parseInt(i,r);if(Number.parseInt)return Number.parseInt(i,r);if(window&&window.parseInt)return window.parseInt(i,r);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}return pe=u,pe}var ge,ut;function an(){if(ut)return ge;ut=1;const e=je(),o=nn(),t=rn(),u=on();class y{constructor(m){this.options=m,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(a,P)=>String.fromCharCode(Number.parseInt(P,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(a,P)=>String.fromCharCode(Number.parseInt(P,16))}},this.addExternalEntities=T,this.parseXml=s,this.parseTextData=i,this.resolveNameSpace=r,this.buildAttributesMap=n,this.isItStopNode=I,this.replaceEntitiesValue=h,this.readStopNodeData=f,this.saveTextToParentTag=w,this.addChild=E}}function T(d){const m=Object.keys(d);for(let a=0;a<m.length;a++){const P=m[a];this.lastEntities[P]={regex:new RegExp("&"+P+";","g"),val:d[P]}}}function i(d,m,a,P,b,p,O){if(d!==void 0&&(this.options.trimValues&&!P&&(d=d.trim()),d.length>0)){O||(d=this.replaceEntitiesValue(d));const A=this.options.tagValueProcessor(m,d,a,b,p);return A==null?d:typeof A!=typeof d||A!==d?A:this.options.trimValues?N(d,this.options.parseTagValue,this.options.numberParseOptions):d.trim()===d?N(d,this.options.parseTagValue,this.options.numberParseOptions):d}}function r(d){if(this.options.removeNSPrefix){const m=d.split(":"),a=d.charAt(0)==="/"?"/":"";if(m[0]==="xmlns")return"";m.length===2&&(d=a+m[1])}return d}const l=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function n(d,m,a){if(!this.options.ignoreAttributes&&typeof d=="string"){const P=e.getAllMatches(d,l),b=P.length,p={};for(let O=0;O<b;O++){const A=this.resolveNameSpace(P[O][1]);let g=P[O][4],_=this.options.attributeNamePrefix+A;if(A.length)if(this.options.transformAttributeName&&(_=this.options.transformAttributeName(_)),_==="__proto__"&&(_="#__proto__"),g!==void 0){this.options.trimValues&&(g=g.trim()),g=this.replaceEntitiesValue(g);const C=this.options.attributeValueProcessor(A,g,m);C==null?p[_]=g:typeof C!=typeof g||C!==g?p[_]=C:p[_]=N(g,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(p[_]=!0)}if(!Object.keys(p).length)return;if(this.options.attributesGroupName){const O={};return O[this.options.attributesGroupName]=p,O}return p}}const s=function(d){d=d.replace(/\r\n?/g,`
`);const m=new o("!xml");let a=m,P="",b="";for(let p=0;p<d.length;p++)if(d[p]==="<")if(d[p+1]==="/"){const A=k(d,">",p,"Closing Tag is not closed.");let g=d.substring(p+2,A).trim();if(this.options.removeNSPrefix){const W=g.indexOf(":");W!==-1&&(g=g.substr(W+1))}this.options.transformTagName&&(g=this.options.transformTagName(g)),a&&(P=this.saveTextToParentTag(P,a,b));const _=b.substring(b.lastIndexOf(".")+1);if(g&&this.options.unpairedTags.indexOf(g)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${g}>`);let C=0;_&&this.options.unpairedTags.indexOf(_)!==-1?(C=b.lastIndexOf(".",b.lastIndexOf(".")-1),this.tagsNodeStack.pop()):C=b.lastIndexOf("."),b=b.substring(0,C),a=this.tagsNodeStack.pop(),P="",p=A}else if(d[p+1]==="?"){let A=c(d,p,!1,"?>");if(!A)throw new Error("Pi Tag is not closed.");if(P=this.saveTextToParentTag(P,a,b),!(this.options.ignoreDeclaration&&A.tagName==="?xml"||this.options.ignorePiTags)){const g=new o(A.tagName);g.add(this.options.textNodeName,""),A.tagName!==A.tagExp&&A.attrExpPresent&&(g[":@"]=this.buildAttributesMap(A.tagExp,b,A.tagName)),this.addChild(a,g,b)}p=A.closeIndex+1}else if(d.substr(p+1,3)==="!--"){const A=k(d,"-->",p+4,"Comment is not closed.");if(this.options.commentPropName){const g=d.substring(p+4,A-2);P=this.saveTextToParentTag(P,a,b),a.add(this.options.commentPropName,[{[this.options.textNodeName]:g}])}p=A}else if(d.substr(p+1,2)==="!D"){const A=t(d,p);this.docTypeEntities=A.entities,p=A.i}else if(d.substr(p+1,2)==="!["){const A=k(d,"]]>",p,"CDATA is not closed.")-2,g=d.substring(p+9,A);P=this.saveTextToParentTag(P,a,b);let _=this.parseTextData(g,a.tagname,b,!0,!1,!0,!0);_==null&&(_=""),this.options.cdataPropName?a.add(this.options.cdataPropName,[{[this.options.textNodeName]:g}]):a.add(this.options.textNodeName,_),p=A+2}else{let A=c(d,p,this.options.removeNSPrefix),g=A.tagName;const _=A.rawTagName;let C=A.tagExp,W=A.attrExpPresent,st=A.closeIndex;this.options.transformTagName&&(g=this.options.transformTagName(g)),a&&P&&a.tagname!=="!xml"&&(P=this.saveTextToParentTag(P,a,b,!1));const nt=a;if(nt&&this.options.unpairedTags.indexOf(nt.tagname)!==-1&&(a=this.tagsNodeStack.pop(),b=b.substring(0,b.lastIndexOf("."))),g!==m.tagname&&(b+=b?"."+g:g),this.isItStopNode(this.options.stopNodes,b,g)){let M="";if(C.length>0&&C.lastIndexOf("/")===C.length-1)g[g.length-1]==="/"?(g=g.substr(0,g.length-1),b=b.substr(0,b.length-1),C=g):C=C.substr(0,C.length-1),p=A.closeIndex;else if(this.options.unpairedTags.indexOf(g)!==-1)p=A.closeIndex;else{const ce=this.readStopNodeData(d,_,st+1);if(!ce)throw new Error(`Unexpected end of ${_}`);p=ce.i,M=ce.tagContent}const le=new o(g);g!==C&&W&&(le[":@"]=this.buildAttributesMap(C,b,g)),M&&(M=this.parseTextData(M,g,b,!0,W,!0,!0)),b=b.substr(0,b.lastIndexOf(".")),le.add(this.options.textNodeName,M),this.addChild(a,le,b)}else{if(C.length>0&&C.lastIndexOf("/")===C.length-1){g[g.length-1]==="/"?(g=g.substr(0,g.length-1),b=b.substr(0,b.length-1),C=g):C=C.substr(0,C.length-1),this.options.transformTagName&&(g=this.options.transformTagName(g));const M=new o(g);g!==C&&W&&(M[":@"]=this.buildAttributesMap(C,b,g)),this.addChild(a,M,b),b=b.substr(0,b.lastIndexOf("."))}else{const M=new o(g);this.tagsNodeStack.push(a),g!==C&&W&&(M[":@"]=this.buildAttributesMap(C,b,g)),this.addChild(a,M,b),a=M}P="",p=st}}else P+=d[p];return m.child};function E(d,m,a){const P=this.options.updateTag(m.tagname,a,m[":@"]);P===!1||(typeof P=="string"&&(m.tagname=P),d.addChild(m))}const h=function(d){if(this.options.processEntities){for(let m in this.docTypeEntities){const a=this.docTypeEntities[m];d=d.replace(a.regx,a.val)}for(let m in this.lastEntities){const a=this.lastEntities[m];d=d.replace(a.regex,a.val)}if(this.options.htmlEntities)for(let m in this.htmlEntities){const a=this.htmlEntities[m];d=d.replace(a.regex,a.val)}d=d.replace(this.ampEntity.regex,this.ampEntity.val)}return d};function w(d,m,a,P){return d&&(P===void 0&&(P=Object.keys(m.child).length===0),d=this.parseTextData(d,m.tagname,a,!1,m[":@"]?Object.keys(m[":@"]).length!==0:!1,P),d!==void 0&&d!==""&&m.add(this.options.textNodeName,d),d=""),d}function I(d,m,a){const P="*."+a;for(const b in d){const p=d[b];if(P===p||m===p)return!0}return!1}function x(d,m,a=">"){let P,b="";for(let p=m;p<d.length;p++){let O=d[p];if(P)O===P&&(P="");else if(O==='"'||O==="'")P=O;else if(O===a[0])if(a[1]){if(d[p+1]===a[1])return{data:b,index:p}}else return{data:b,index:p};else O==="	"&&(O=" ");b+=O}}function k(d,m,a,P){const b=d.indexOf(m,a);if(b===-1)throw new Error(P);return b+m.length-1}function c(d,m,a,P=">"){const b=x(d,m+1,P);if(!b)return;let p=b.data;const O=b.index,A=p.search(/\s/);let g=p,_=!0;A!==-1&&(g=p.substring(0,A),p=p.substring(A+1).trimStart());const C=g;if(a){const W=g.indexOf(":");W!==-1&&(g=g.substr(W+1),_=g!==b.data.substr(W+1))}return{tagName:g,tagExp:p,closeIndex:O,attrExpPresent:_,rawTagName:C}}function f(d,m,a){const P=a;let b=1;for(;a<d.length;a++)if(d[a]==="<")if(d[a+1]==="/"){const p=k(d,">",a,`${m} is not closed`);if(d.substring(a+2,p).trim()===m&&(b--,b===0))return{tagContent:d.substring(P,a),i:p};a=p}else if(d[a+1]==="?")a=k(d,"?>",a+1,"StopNode is not closed.");else if(d.substr(a+1,3)==="!--")a=k(d,"-->",a+3,"StopNode is not closed.");else if(d.substr(a+1,2)==="![")a=k(d,"]]>",a,"StopNode is not closed.")-2;else{const p=c(d,a,">");p&&((p&&p.tagName)===m&&p.tagExp[p.tagExp.length-1]!=="/"&&b++,a=p.closeIndex)}}function N(d,m,a){if(m&&typeof d=="string"){const P=d.trim();return P==="true"?!0:P==="false"?!1:u(d,a)}else return e.isExist(d)?d:""}return ge=y,ge}var me={},ft;function ln(){if(ft)return me;ft=1;function e(T,i){return o(T,i)}function o(T,i,r){let l;const n={};for(let s=0;s<T.length;s++){const E=T[s],h=t(E);let w="";if(r===void 0?w=h:w=r+"."+h,h===i.textNodeName)l===void 0?l=E[h]:l+=""+E[h];else{if(h===void 0)continue;if(E[h]){let I=o(E[h],i,w);const x=y(I,i);E[":@"]?u(I,E[":@"],w,i):Object.keys(I).length===1&&I[i.textNodeName]!==void 0&&!i.alwaysCreateTextNode?I=I[i.textNodeName]:Object.keys(I).length===0&&(i.alwaysCreateTextNode?I[i.textNodeName]="":I=""),n[h]!==void 0&&n.hasOwnProperty(h)?(Array.isArray(n[h])||(n[h]=[n[h]]),n[h].push(I)):i.isArray(h,w,x)?n[h]=[I]:n[h]=I}}}return typeof l=="string"?l.length>0&&(n[i.textNodeName]=l):l!==void 0&&(n[i.textNodeName]=l),n}function t(T){const i=Object.keys(T);for(let r=0;r<i.length;r++){const l=i[r];if(l!==":@")return l}}function u(T,i,r,l){if(i){const n=Object.keys(i),s=n.length;for(let E=0;E<s;E++){const h=n[E];l.isArray(h,r+"."+h,!0,!0)?T[h]=[i[h]]:T[h]=i[h]}}}function y(T,i){const{textNodeName:r}=i,l=Object.keys(T).length;return!!(l===0||l===1&&(T[r]||typeof T[r]=="boolean"||T[r]===0))}return me.prettify=e,me}var ye,ht;function cn(){if(ht)return ye;ht=1;const{buildOptions:e}=sn(),o=an(),{prettify:t}=ln(),u=Ft();class y{constructor(i){this.externalEntities={},this.options=e(i)}parse(i,r){if(typeof i!="string")if(i.toString)i=i.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});const s=u.validate(i,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}const l=new o(this.options);l.addExternalEntities(this.externalEntities);const n=l.parseXml(i);return this.options.preserveOrder||n===void 0?n:t(n,this.options)}addEntity(i,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(i.indexOf("&")!==-1||i.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[i]=r}}return ye=y,ye}var Ee,pt;function dn(){if(pt)return Ee;pt=1;const e=`
`;function o(r,l){let n="";return l.format&&l.indentBy.length>0&&(n=e),t(r,l,"",n)}function t(r,l,n,s){let E="",h=!1;for(let w=0;w<r.length;w++){const I=r[w],x=u(I);if(x===void 0)continue;let k="";if(n.length===0?k=x:k=`${n}.${x}`,x===l.textNodeName){let m=I[x];T(k,l)||(m=l.tagValueProcessor(x,m),m=i(m,l)),h&&(E+=s),E+=m,h=!1;continue}else if(x===l.cdataPropName){h&&(E+=s),E+=`<![CDATA[${I[x][0][l.textNodeName]}]]>`,h=!1;continue}else if(x===l.commentPropName){E+=s+`<!--${I[x][0][l.textNodeName]}-->`,h=!0;continue}else if(x[0]==="?"){const m=y(I[":@"],l),a=x==="?xml"?"":s;let P=I[x][0][l.textNodeName];P=P.length!==0?" "+P:"",E+=a+`<${x}${P}${m}?>`,h=!0;continue}let c=s;c!==""&&(c+=l.indentBy);const f=y(I[":@"],l),N=s+`<${x}${f}`,d=t(I[x],l,k,c);l.unpairedTags.indexOf(x)!==-1?l.suppressUnpairedNode?E+=N+">":E+=N+"/>":(!d||d.length===0)&&l.suppressEmptyNode?E+=N+"/>":d&&d.endsWith(">")?E+=N+`>${d}${s}</${x}>`:(E+=N+">",d&&s!==""&&(d.includes("/>")||d.includes("</"))?E+=s+l.indentBy+d+s:E+=d,E+=`</${x}>`),h=!0}return E}function u(r){const l=Object.keys(r);for(let n=0;n<l.length;n++){const s=l[n];if(r.hasOwnProperty(s)&&s!==":@")return s}}function y(r,l){let n="";if(r&&!l.ignoreAttributes)for(let s in r){if(!r.hasOwnProperty(s))continue;let E=l.attributeValueProcessor(s,r[s]);E=i(E,l),E===!0&&l.suppressBooleanAttributes?n+=` ${s.substr(l.attributeNamePrefix.length)}`:n+=` ${s.substr(l.attributeNamePrefix.length)}="${E}"`}return n}function T(r,l){r=r.substr(0,r.length-l.textNodeName.length-1);let n=r.substr(r.lastIndexOf(".")+1);for(let s in l.stopNodes)if(l.stopNodes[s]===r||l.stopNodes[s]==="*."+n)return!0;return!1}function i(r,l){if(r&&r.length>0&&l.processEntities)for(let n=0;n<l.entities.length;n++){const s=l.entities[n];r=r.replace(s.regex,s.val)}return r}return Ee=o,Ee}var be,gt;function un(){if(gt)return be;gt=1;const e=dn(),o={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(i,r){return r},attributeValueProcessor:function(i,r){return r},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function t(i){this.options=Object.assign({},o,i),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=T),this.processTextOrObjNode=u,this.options.format?(this.indentate=y,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}t.prototype.build=function(i){return this.options.preserveOrder?e(i,this.options):(Array.isArray(i)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(i={[this.options.arrayNodeName]:i}),this.j2x(i,0).val)},t.prototype.j2x=function(i,r){let l="",n="";for(let s in i)if(Object.prototype.hasOwnProperty.call(i,s))if(typeof i[s]>"u")this.isAttribute(s)&&(n+="");else if(i[s]===null)this.isAttribute(s)?n+="":s[0]==="?"?n+=this.indentate(r)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(r)+"<"+s+"/"+this.tagEndChar;else if(i[s]instanceof Date)n+=this.buildTextValNode(i[s],s,"",r);else if(typeof i[s]!="object"){const E=this.isAttribute(s);if(E)l+=this.buildAttrPairStr(E,""+i[s]);else if(s===this.options.textNodeName){let h=this.options.tagValueProcessor(s,""+i[s]);n+=this.replaceEntitiesValue(h)}else n+=this.buildTextValNode(i[s],s,"",r)}else if(Array.isArray(i[s])){const E=i[s].length;let h="",w="";for(let I=0;I<E;I++){const x=i[s][I];if(!(typeof x>"u"))if(x===null)s[0]==="?"?n+=this.indentate(r)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(r)+"<"+s+"/"+this.tagEndChar;else if(typeof x=="object")if(this.options.oneListGroup){const k=this.j2x(x,r+1);h+=k.val,this.options.attributesGroupName&&x.hasOwnProperty(this.options.attributesGroupName)&&(w+=k.attrStr)}else h+=this.processTextOrObjNode(x,s,r);else if(this.options.oneListGroup){let k=this.options.tagValueProcessor(s,x);k=this.replaceEntitiesValue(k),h+=k}else h+=this.buildTextValNode(x,s,"",r)}this.options.oneListGroup&&(h=this.buildObjectNode(h,s,w,r)),n+=h}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const E=Object.keys(i[s]),h=E.length;for(let w=0;w<h;w++)l+=this.buildAttrPairStr(E[w],""+i[s][E[w]])}else n+=this.processTextOrObjNode(i[s],s,r);return{attrStr:l,val:n}},t.prototype.buildAttrPairStr=function(i,r){return r=this.options.attributeValueProcessor(i,""+r),r=this.replaceEntitiesValue(r),this.options.suppressBooleanAttributes&&r==="true"?" "+i:" "+i+'="'+r+'"'};function u(i,r,l){const n=this.j2x(i,l+1);return i[this.options.textNodeName]!==void 0&&Object.keys(i).length===1?this.buildTextValNode(i[this.options.textNodeName],r,n.attrStr,l):this.buildObjectNode(n.val,r,n.attrStr,l)}t.prototype.buildObjectNode=function(i,r,l,n){if(i==="")return r[0]==="?"?this.indentate(n)+"<"+r+l+"?"+this.tagEndChar:this.indentate(n)+"<"+r+l+this.closeTag(r)+this.tagEndChar;{let s="</"+r+this.tagEndChar,E="";return r[0]==="?"&&(E="?",s=""),(l||l==="")&&i.indexOf("<")===-1?this.indentate(n)+"<"+r+l+E+">"+i+s:this.options.commentPropName!==!1&&r===this.options.commentPropName&&E.length===0?this.indentate(n)+`<!--${i}-->`+this.newLine:this.indentate(n)+"<"+r+l+E+this.tagEndChar+i+this.indentate(n)+s}},t.prototype.closeTag=function(i){let r="";return this.options.unpairedTags.indexOf(i)!==-1?this.options.suppressUnpairedNode||(r="/"):this.options.suppressEmptyNode?r="/":r=`></${i}`,r},t.prototype.buildTextValNode=function(i,r,l,n){if(this.options.cdataPropName!==!1&&r===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${i}]]>`+this.newLine;if(this.options.commentPropName!==!1&&r===this.options.commentPropName)return this.indentate(n)+`<!--${i}-->`+this.newLine;if(r[0]==="?")return this.indentate(n)+"<"+r+l+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(r,i);return s=this.replaceEntitiesValue(s),s===""?this.indentate(n)+"<"+r+l+this.closeTag(r)+this.tagEndChar:this.indentate(n)+"<"+r+l+">"+s+"</"+r+this.tagEndChar}},t.prototype.replaceEntitiesValue=function(i){if(i&&i.length>0&&this.options.processEntities)for(let r=0;r<this.options.entities.length;r++){const l=this.options.entities[r];i=i.replace(l.regex,l.val)}return i};function y(i){return this.options.indentBy.repeat(i)}function T(i){return i.startsWith(this.options.attributeNamePrefix)&&i!==this.options.textNodeName?i.substr(this.attrPrefixLen):!1}return be=t,be}var Pe,mt;function fn(){if(mt)return Pe;mt=1;const e=Ft(),o=cn(),t=un();return Pe={XMLParser:o,XMLValidator:e,XMLBuilder:t},Pe}var hn=fn();const Xe=(e,o)=>as(e,o).then(t=>{if(t.length){const u=new hn.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(l,n)=>n.trim()===""&&n.includes(`
`)?"":void 0});u.addEntity("#xD","\r"),u.addEntity("#10",`
`);let y;try{y=u.parse(t,!0)}catch(l){throw l&&typeof l=="object"&&Object.defineProperty(l,"$responseBodyText",{value:t}),l}const T="#text",i=Object.keys(y)[0],r=y[i];return r[T]&&(r[i]=r[T],delete r[T]),$t(r)}return{}}),pn=async(e,o)=>{const t=await Xe(e,o);return t.Error&&(t.Error.message=t.Error.message??t.Error.Message),t},gn=async(e,o,t)=>({operation:cs(o).operation,region:await Ct(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function mn(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(o,t)=>({signingProperties:{config:o,context:t}})}}function yn(e){return{schemeId:"smithy.api#noAuth"}}const En=e=>{const o=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{o.push(yn());break}default:o.push(mn(e))}return o},bn=e=>Object.assign(e,{stsClientCtor:Ke}),Pn=e=>{const o=bn(e),t=ls(o);return Object.assign(t,{authSchemePreference:Ct(e.authSchemePreference??[])})},Nn=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),Vt={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},An="3.821.0",Tn={version:An},xn=e=>new TextEncoder().encode(e),In=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(e)},Lt="required",S="type",v="fn",R="argv",J="ref",yt=!1,Ne=!0,K="booleanEquals",V="stringEquals",qt="sigv4",Ut="sts",Ht="us-east-1",$="endpoint",Et="https://sts.{Region}.{PartitionResult#dnsSuffix}",z="tree",Y="error",Ge="getAttr",bt={[Lt]:!1,[S]:"String"},Ae={[Lt]:!0,default:!1,[S]:"Boolean"},Bt={[J]:"Endpoint"},Pt={[v]:"isSet",[R]:[{[J]:"Region"}]},L={[J]:"Region"},Nt={[v]:"aws.partition",[R]:[L],assign:"PartitionResult"},Mt={[J]:"UseFIPS"},Wt={[J]:"UseDualStack"},H={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:qt,signingName:Ut,signingRegion:Ht}]},headers:{}},B={},At={conditions:[{[v]:V,[R]:[L,"aws-global"]}],[$]:H,[S]:$},zt={[v]:K,[R]:[Mt,!0]},jt={[v]:K,[R]:[Wt,!0]},Tt={[v]:Ge,[R]:[{[J]:"PartitionResult"},"supportsFIPS"]},Xt={[J]:"PartitionResult"},xt={[v]:K,[R]:[!0,{[v]:Ge,[R]:[Xt,"supportsDualStack"]}]},It=[{[v]:"isSet",[R]:[Bt]}],wt=[zt],St=[jt],wn={parameters:{Region:bt,UseDualStack:Ae,UseFIPS:Ae,Endpoint:bt,UseGlobalEndpoint:Ae},rules:[{conditions:[{[v]:K,[R]:[{[J]:"UseGlobalEndpoint"},Ne]},{[v]:"not",[R]:It},Pt,Nt,{[v]:K,[R]:[Mt,yt]},{[v]:K,[R]:[Wt,yt]}],rules:[{conditions:[{[v]:V,[R]:[L,"ap-northeast-1"]}],endpoint:H,[S]:$},{conditions:[{[v]:V,[R]:[L,"ap-south-1"]}],endpoint:H,[S]:$},{conditions:[{[v]:V,[R]:[L,"ap-southeast-1"]}],endpoint:H,[S]:$},{conditions:[{[v]:V,[R]:[L,"ap-southeast-2"]}],endpoint:H,[S]:$},At,{conditions:[{[v]:V,[R]:[L,"ca-central-1"]}],endpoint:H,[S]:$},{conditions:[{[v]:V,[R]:[L,"eu-central-1"]}],endpoint:H,[S]:$},{conditions:[{[v]:V,[R]:[L,"eu-north-1"]}],endpoint:H,[S]:$},{conditions:[{[v]:V,[R]:[L,"eu-west-1"]}],endpoint:H,[S]:$},{conditions:[{[v]:V,[R]:[L,"eu-west-2"]}],endpoint:H,[S]:$},{conditions:[{[v]:V,[R]:[L,"eu-west-3"]}],endpoint:H,[S]:$},{conditions:[{[v]:V,[R]:[L,"sa-east-1"]}],endpoint:H,[S]:$},{conditions:[{[v]:V,[R]:[L,Ht]}],endpoint:H,[S]:$},{conditions:[{[v]:V,[R]:[L,"us-east-2"]}],endpoint:H,[S]:$},{conditions:[{[v]:V,[R]:[L,"us-west-1"]}],endpoint:H,[S]:$},{conditions:[{[v]:V,[R]:[L,"us-west-2"]}],endpoint:H,[S]:$},{endpoint:{url:Et,properties:{authSchemes:[{name:qt,signingName:Ut,signingRegion:"{Region}"}]},headers:B},[S]:$}],[S]:z},{conditions:It,rules:[{conditions:wt,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[S]:Y},{conditions:St,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[S]:Y},{endpoint:{url:Bt,properties:B,headers:B},[S]:$}],[S]:z},{conditions:[Pt],rules:[{conditions:[Nt],rules:[{conditions:[zt,jt],rules:[{conditions:[{[v]:K,[R]:[Ne,Tt]},xt],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:B,headers:B},[S]:$}],[S]:z},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[S]:Y}],[S]:z},{conditions:wt,rules:[{conditions:[{[v]:K,[R]:[Tt,Ne]}],rules:[{conditions:[{[v]:V,[R]:[{[v]:Ge,[R]:[Xt,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:B,headers:B},[S]:$},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:B,headers:B},[S]:$}],[S]:z},{error:"FIPS is enabled but this partition does not support FIPS",[S]:Y}],[S]:z},{conditions:St,rules:[{conditions:[xt],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:B,headers:B},[S]:$}],[S]:z},{error:"DualStack is enabled but this partition does not support DualStack",[S]:Y}],[S]:z},At,{endpoint:{url:Et,properties:B,headers:B},[S]:$}],[S]:z}],[S]:z},{error:"Invalid Configuration: Missing Region",[S]:Y}]},Sn=wn,Cn=new ds({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),vn=(e,o={})=>Cn.get(e,()=>us(Sn,{endpointParams:e,logger:o.logger}));hs.aws=fs;const Rn=e=>({apiVersion:"2011-06-15",base64Decoder:(e==null?void 0:e.base64Decoder)??Zs,base64Encoder:(e==null?void 0:e.base64Encoder)??Js,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??vn,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??En,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4"),signer:new ms},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new ys}],logger:(e==null?void 0:e.logger)??new gs,serviceId:(e==null?void 0:e.serviceId)??"STS",urlParser:(e==null?void 0:e.urlParser)??ps,utf8Decoder:(e==null?void 0:e.utf8Decoder)??xn,utf8Encoder:(e==null?void 0:e.utf8Encoder)??In}),_n=e=>{const o=Es(e),t=()=>o().then(Ss),u=Rn(e);return{...u,...e,runtime:"browser",defaultsMode:o,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??xs,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(y=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Ts({serviceId:u.serviceId,clientVersion:Tn.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??As,region:(e==null?void 0:e.region)??Ns("Region is missing"),requestHandler:Qs.create((e==null?void 0:e.requestHandler)??t),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await t()).retryMode||Ps),sha256:(e==null?void 0:e.sha256)??bs,streamCollector:(e==null?void 0:e.streamCollector)??Ys,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(ws)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(Is))}},On=e=>({setHttpHandler(o){e.httpHandler=o},httpHandler(){return e.httpHandler},updateHttpClientConfig(o,t){var u;(u=e.httpHandler)==null||u.updateHttpClientConfig(o,t)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),kn=e=>({httpHandler:e.httpHandler()});class ae{constructor(o){this.method=o.method||"GET",this.hostname=o.hostname||"localhost",this.port=o.port,this.query=o.query||{},this.headers=o.headers||{},this.body=o.body,this.protocol=o.protocol?o.protocol.slice(-1)!==":"?`${o.protocol}:`:o.protocol:"https:",this.path=o.path?o.path.charAt(0)!=="/"?`/${o.path}`:o.path:"/",this.username=o.username,this.password=o.password,this.fragment=o.fragment}static clone(o){const t=new ae({...o,headers:{...o.headers}});return t.query&&(t.query=$n(t.query)),t}static isInstance(o){if(!o)return!1;const t=o;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&typeof t.query=="object"&&typeof t.headers=="object"}clone(){return ae.clone(this)}}function $n(e){return Object.keys(e).reduce((o,t)=>{const u=e[t];return{...o,[t]:Array.isArray(u)?[...u]:u}},{})}const Fn=e=>{const o=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,u=e.credentials;return{setHttpAuthScheme(y){const T=o.findIndex(i=>i.schemeId===y.schemeId);T===-1?o.push(y):o.splice(T,1,y)},httpAuthSchemes(){return o},setHttpAuthSchemeProvider(y){t=y},httpAuthSchemeProvider(){return t},setCredentials(y){u=y},credentials(){return u}}},Vn=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),Ln=(e,o)=>{const t=Object.assign(Cs(e),vs(e),On(e),Fn(e));return o.forEach(u=>u.configure(t)),Object.assign(e,Rs(t),_s(t),kn(t),Vn(t))};class Ke extends Os{constructor(...[t]){const u=_n(t||{});super(u);U(this,"config");this.initConfig=u;const y=Nn(u),T=ks(y),i=$s(T),r=Fs(i),l=js(r),n=Vs(l),s=Pn(n),E=Ln(s,(t==null?void 0:t.extensions)||[]);this.config=E,this.middlewareStack.use(Ls(this.config)),this.middlewareStack.use(qs(this.config)),this.middlewareStack.use(Us(this.config)),this.middlewareStack.use(Hs(this.config)),this.middlewareStack.use(Bs(this.config)),this.middlewareStack.use(Ms(this.config)),this.middlewareStack.use(Ws(this.config,{httpAuthSchemeParametersProvider:gn,identityProviderConfigProvider:async h=>new Xs({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(zs(this.config))}destroy(){super.destroy()}}class j extends Gs{constructor(o){super(o),Object.setPrototypeOf(this,j.prototype)}}const Gt=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:vt}}),qn=e=>({...e,...e.Credentials&&{Credentials:Gt(e.Credentials)}});class Je extends j{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t});U(this,"name","ExpiredTokenException");U(this,"$fault","client");Object.setPrototypeOf(this,Je.prototype)}}class Ze extends j{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t});U(this,"name","MalformedPolicyDocumentException");U(this,"$fault","client");Object.setPrototypeOf(this,Ze.prototype)}}class Ye extends j{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t});U(this,"name","PackedPolicyTooLargeException");U(this,"$fault","client");Object.setPrototypeOf(this,Ye.prototype)}}class Qe extends j{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t});U(this,"name","RegionDisabledException");U(this,"$fault","client");Object.setPrototypeOf(this,Qe.prototype)}}class De extends j{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t});U(this,"name","IDPRejectedClaimException");U(this,"$fault","client");Object.setPrototypeOf(this,De.prototype)}}class et extends j{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t});U(this,"name","InvalidIdentityTokenException");U(this,"$fault","client");Object.setPrototypeOf(this,et.prototype)}}const Un=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:vt}}),Hn=e=>({...e,...e.Credentials&&{Credentials:Gt(e.Credentials)}});class tt extends j{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t});U(this,"name","IDPCommunicationErrorException");U(this,"$fault","client");Object.setPrototypeOf(this,tt.prototype)}}const Bn=async(e,o)=>{const t=Dt;let u;return u=ns({...Qn(e),[ts]:mr,[ss]:es}),Qt(o,t,"/",void 0,u)},Mn=async(e,o)=>{const t=Dt;let u;return u=ns({...Dn(e),[ts]:yr,[ss]:es}),Qt(o,t,"/",void 0,u)},Wn=async(e,o)=>{if(e.statusCode>=300)return Kt(e,o);const t=await Xe(e.body,o);let u={};return u=or(t.AssumeRoleResult),{$metadata:G(e),...u}},zn=async(e,o)=>{if(e.statusCode>=300)return Kt(e,o);const t=await Xe(e.body,o);let u={};return u=ar(t.AssumeRoleWithWebIdentityResult),{$metadata:G(e),...u}},Kt=async(e,o)=>{const t={...e,body:await pn(e.body,o)},u=Er(e,t.body);switch(u){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await jn(t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Jn(t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Zn(t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Yn(t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await Xn(t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await Gn(t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await Kn(t);default:const y=t.body;return gr({output:e,parsedBody:y.Error,errorCode:u})}},jn=async(e,o)=>{const t=e.body,u=lr(t.Error),y=new Je({$metadata:G(e),...u});return Z(y,t)},Xn=async(e,o)=>{const t=e.body,u=cr(t.Error),y=new tt({$metadata:G(e),...u});return Z(y,t)},Gn=async(e,o)=>{const t=e.body,u=dr(t.Error),y=new De({$metadata:G(e),...u});return Z(y,t)},Kn=async(e,o)=>{const t=e.body,u=ur(t.Error),y=new et({$metadata:G(e),...u});return Z(y,t)},Jn=async(e,o)=>{const t=e.body,u=fr(t.Error),y=new Ze({$metadata:G(e),...u});return Z(y,t)},Zn=async(e,o)=>{const t=e.body,u=hr(t.Error),y=new Ye({$metadata:G(e),...u});return Z(y,t)},Yn=async(e,o)=>{const t=e.body,u=pr(t.Error),y=new Qe({$metadata:G(e),...u});return Z(y,t)},Qn=(e,o)=>{var u,y,T,i;const t={};if(e[re]!=null&&(t[re]=e[re]),e[ie]!=null&&(t[ie]=e[ie]),e[se]!=null){const r=Jt(e[se]);((u=e[se])==null?void 0:u.length)===0&&(t.PolicyArns=[]),Object.entries(r).forEach(([l,n])=>{const s=`PolicyArns.${l}`;t[s]=n})}if(e[te]!=null&&(t[te]=e[te]),e[ee]!=null&&(t[ee]=e[ee]),e[Ue]!=null){const r=ir(e[Ue]);((y=e[Ue])==null?void 0:y.length)===0&&(t.Tags=[]),Object.entries(r).forEach(([l,n])=>{const s=`Tags.${l}`;t[s]=n})}if(e[Be]!=null){const r=rr(e[Be]);((T=e[Be])==null?void 0:T.length)===0&&(t.TransitiveTagKeys=[]),Object.entries(r).forEach(([l,n])=>{const s=`TransitiveTagKeys.${l}`;t[s]=n})}if(e[ve]!=null&&(t[ve]=e[ve]),e[Le]!=null&&(t[Le]=e[Le]),e[He]!=null&&(t[He]=e[He]),e[X]!=null&&(t[X]=e[X]),e[Oe]!=null){const r=sr(e[Oe]);((i=e[Oe])==null?void 0:i.length)===0&&(t.ProvidedContexts=[]),Object.entries(r).forEach(([l,n])=>{const s=`ProvidedContexts.${l}`;t[s]=n})}return t},Dn=(e,o)=>{var u;const t={};if(e[re]!=null&&(t[re]=e[re]),e[ie]!=null&&(t[ie]=e[ie]),e[We]!=null&&(t[We]=e[We]),e[ke]!=null&&(t[ke]=e[ke]),e[se]!=null){const y=Jt(e[se]);((u=e[se])==null?void 0:u.length)===0&&(t.PolicyArns=[]),Object.entries(y).forEach(([T,i])=>{const r=`PolicyArns.${T}`;t[r]=i})}return e[te]!=null&&(t[te]=e[te]),e[ee]!=null&&(t[ee]=e[ee]),t},Jt=(e,o)=>{const t={};let u=1;for(const y of e){if(y===null)continue;const T=er(y);Object.entries(T).forEach(([i,r])=>{t[`member.${u}.${i}`]=r}),u++}return t},er=(e,o)=>{const t={};return e[ze]!=null&&(t[ze]=e[ze]),t},tr=(e,o)=>{const t={};return e[_e]!=null&&(t[_e]=e[_e]),e[Se]!=null&&(t[Se]=e[Se]),t},sr=(e,o)=>{const t={};let u=1;for(const y of e){if(y===null)continue;const T=tr(y);Object.entries(T).forEach(([i,r])=>{t[`member.${u}.${i}`]=r}),u++}return t},nr=(e,o)=>{const t={};return e[Re]!=null&&(t[Re]=e[Re]),e[Me]!=null&&(t[Me]=e[Me]),t},rr=(e,o)=>{const t={};let u=1;for(const y of e)y!==null&&(t[`member.${u}`]=y,u++);return t},ir=(e,o)=>{const t={};let u=1;for(const y of e){if(y===null)continue;const T=nr(y);Object.entries(T).forEach(([i,r])=>{t[`member.${u}.${i}`]=r}),u++}return t},Zt=(e,o)=>{const t={};return e[xe]!=null&&(t[xe]=q(e[xe])),e[Ie]!=null&&(t[Ie]=q(e[Ie])),t},or=(e,o)=>{const t={};return e[D]!=null&&(t[D]=Yt(e[D])),e[Q]!=null&&(t[Q]=Zt(e[Q])),e[ne]!=null&&(t[ne]=Ot(e[ne])),e[X]!=null&&(t[X]=q(e[X])),t},ar=(e,o)=>{const t={};return e[D]!=null&&(t[D]=Yt(e[D])),e[Ve]!=null&&(t[Ve]=q(e[Ve])),e[Q]!=null&&(t[Q]=Zt(e[Q])),e[ne]!=null&&(t[ne]=Ot(e[ne])),e[$e]!=null&&(t[$e]=q(e[$e])),e[we]!=null&&(t[we]=q(e[we])),e[X]!=null&&(t[X]=q(e[X])),t},Yt=(e,o)=>{const t={};return e[Te]!=null&&(t[Te]=q(e[Te])),e[Fe]!=null&&(t[Fe]=q(e[Fe])),e[qe]!=null&&(t[qe]=q(e[qe])),e[Ce]!=null&&(t[Ce]=Ds(en(e[Ce]))),t},lr=(e,o)=>{const t={};return e[F]!=null&&(t[F]=q(e[F])),t},cr=(e,o)=>{const t={};return e[F]!=null&&(t[F]=q(e[F])),t},dr=(e,o)=>{const t={};return e[F]!=null&&(t[F]=q(e[F])),t},ur=(e,o)=>{const t={};return e[F]!=null&&(t[F]=q(e[F])),t},fr=(e,o)=>{const t={};return e[F]!=null&&(t[F]=q(e[F])),t},hr=(e,o)=>{const t={};return e[F]!=null&&(t[F]=q(e[F])),t},pr=(e,o)=>{const t={};return e[F]!=null&&(t[F]=q(e[F])),t},G=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),gr=Ks(j),Qt=async(e,o,t,u,y)=>{const{hostname:T,protocol:i="https",port:r,path:l}=await e.endpoint(),n={protocol:i,hostname:T,port:r,method:"POST",path:l.endsWith("/")?l.slice(0,-1)+t:l+t,headers:o};return y!==void 0&&(n.body=y),new ae(n)},Dt={"content-type":"application/x-www-form-urlencoded"},es="2011-06-15",ts="Action",Te="AccessKeyId",mr="AssumeRole",xe="AssumedRoleId",Q="AssumedRoleUser",yr="AssumeRoleWithWebIdentity",Ie="Arn",we="Audience",D="Credentials",Se="ContextAssertion",ee="DurationSeconds",Ce="Expiration",ve="ExternalId",Re="Key",te="Policy",se="PolicyArns",_e="ProviderArn",Oe="ProvidedContexts",ke="ProviderId",ne="PackedPolicySize",$e="Provider",re="RoleArn",ie="RoleSessionName",Fe="SecretAccessKey",Ve="SubjectFromWebIdentityToken",X="SourceIdentity",Le="SerialNumber",qe="SessionToken",Ue="Tags",He="TokenCode",Be="TransitiveTagKeys",ss="Version",Me="Value",We="WebIdentityToken",ze="arn",F="message",ns=e=>Object.entries(e).map(([o,t])=>rt(o)+"="+rt(t)).join("&"),Er=(e,o)=>{var t;if(((t=o.Error)==null?void 0:t.Code)!==void 0)return o.Error.Code;if(e.statusCode==404)return"NotFound"};class rs extends Rt.classBuilder().ep(Vt).m(function(o,t,u,y){return[kt(u,this.serialize,this.deserialize),_t(u,o.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,qn).ser(Bn).de(Wn).build(){}class br extends Rt.classBuilder().ep(Vt).m(function(o,t,u,y){return[kt(u,this.serialize,this.deserialize),_t(u,o.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Un,Hn).ser(Mn).de(zn).build(){}const Pr={AssumeRoleCommand:rs,AssumeRoleWithWebIdentityCommand:br};class Nr extends Ke{}tn(Pr,Nr);const Ir=Object.freeze(Object.defineProperty({__proto__:null,AssumeRoleCommand:rs,STSClient:Ke},Symbol.toStringTag,{value:"Module"}));export{br as A,Gt as C,Je as E,De as I,Ze as M,Ye as P,Qe as R,Ke as S,j as a,Nr as b,rs as c,qn as d,et as e,Un as f,Hn as g,tt as h,Ir as l};
